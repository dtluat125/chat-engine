(this["webpackJsonpchat-engine"]=this["webpackJsonpchat-engine"]||[]).push([[0],{105:function(e,t,a){},123:function(e,t,a){},125:function(e,t,a){},134:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),r=a(11),c=a.n(r),i=a(6),o=a.n(i),l=a(10),d=a(9),u=a(25),m=(a(105),a(12)),j=a.n(m),h=(a(123),a(1)),b=function(){var e=Object(s.useState)(""),t=Object(d.a)(e,2),a=t[0],n=t[1],r=Object(s.useState)(""),c=Object(d.a)(r,2),i=c[0],u=c[1],m=Object(s.useState)(""),b=Object(d.a)(m,2),p=b[0],f=b[1],O=Object(s.useState)(""),v=Object(d.a)(O,2),g=v[0],x=v[1],w=Object(s.useState)(""),N=Object(d.a)(w,2),S=N[0],y=N[1],C=Object(s.useState)(!1),P=Object(d.a)(C,2),k=P[0],I=P[1],D=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={"Project-ID":"8381c33d-57cd-41b6-9374-de16a78ede49","User-Name":a,"User-Secret":i},e.prev=2,e.next=5,j.a.get("https://api.chatengine.io/users/me",{headers:s});case 5:n=e.sent,console.log(n),localStorage.setItem("username",a),localStorage.setItem("password",i),localStorage.setItem("avatar",n.data.avatar),localStorage.setItem("first_name",n.data.first_name),localStorage.setItem("last_name",n.data.last_name),window.location.reload(),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(2),x("Wrong username or password. Try again!");case 18:case"end":return e.stop()}}),e,null,[[2,15]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){I(!k)},T=function(){var e=Object(l.a)(o.a.mark((function e(t){var s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),s={"PRIVATE-KEY":"1e5af137-df40-4f47-9963-6ef0db4afb38"},n={username:a,secret:i},0==i.localeCompare(p)){e.next=7;break}x("Your password is not confirmed"),e.next=17;break;case 7:return x(""),e.prev=8,e.next=11,j.a.post("https://api.chatengine.io/users/",n,{headers:s});case 11:y("Your new account is now available!"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(8),x("The username has already been used! Try another one");case 17:case"end":return e.stop()}}),e,null,[[8,14]])})));return function(t){return e.apply(this,arguments)}}();return k?Object(h.jsxs)("div",{className:"sign-in-form",children:[Object(h.jsx)("p",{children:"CHAT APP"}),Object(h.jsxs)("form",{onSubmit:T,action:"",className:"first-form",children:[Object(h.jsxs)("div",{className:"username",children:[Object(h.jsx)("input",{type:"text",name:"name",id:"name-input",required:!0,value:a,onChange:function(e){return n(e.target.value)}}),Object(h.jsx)("label",{className:"content-name",children:Object(h.jsx)("span",{className:"name-span",children:"Username"})})]}),Object(h.jsxs)("div",{className:"password",children:[Object(h.jsx)("input",{type:"password",id:"password",required:!0,value:i,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("label",{className:"content-name",children:Object(h.jsx)("span",{className:" name-span ",children:"Password"})})]}),Object(h.jsxs)("div",{className:"password",children:[Object(h.jsx)("input",{type:"password",id:"cf-password",required:!0,value:p,onChange:function(e){return f(e.target.value)}}),Object(h.jsx)("label",{className:"content-name",children:Object(h.jsx)("span",{className:" name-span ",children:"Confirm your password"})})]}),Object(h.jsx)("button",{id:"sign-in",className:"button",type:"submit",children:"Sign up"})]}),Object(h.jsx)("h2",{className:"error",children:g}),Object(h.jsx)("h2",{className:"success",children:S}),Object(h.jsxs)("h4",{children:["Successfully create your account? ",Object(h.jsx)("button",{className:"sign-up",onClick:F,children:"Sign in"})]})]}):Object(h.jsxs)("div",{className:"sign-in-form",children:[Object(h.jsx)("p",{children:"CHAT APP"}),Object(h.jsxs)("form",{onSubmit:D,action:"",className:"first-form",children:[Object(h.jsxs)("div",{className:"username",children:[Object(h.jsx)("input",{type:"text",name:"name",id:"name-input",required:!0,value:a,onChange:function(e){return n(e.target.value)}}),Object(h.jsx)("label",{className:"content-name",children:Object(h.jsx)("span",{className:"name-span",children:"Username"})})]}),Object(h.jsxs)("div",{className:"password",children:[Object(h.jsx)("input",{type:"password",id:"password",required:!0,value:i,onChange:function(e){return u(e.target.value)}}),Object(h.jsx)("label",{className:"content-name",children:Object(h.jsx)("span",{className:" name-span ",children:"Password"})})]}),Object(h.jsx)("button",{id:"sign-in",className:"button",type:"submit",children:"Sign in"})]}),Object(h.jsxs)("h4",{children:["Don't have an account? ",Object(h.jsx)("button",{className:"sign-up btn",onClick:F,children:"Sign up"})]}),Object(h.jsx)("h2",{className:"error",children:g}),Object(h.jsx)("h2",{className:"success",children:S})]})},p=a(51),f=a(52),O=a(8),v=a(55),g=a(54),x=(a(125),a(53)),w=a.n(x),N=function(e){Object(v.a)(a,e);var t=Object(g.a)(a);function a(e){var s;return Object(p.a)(this,a),(s=t.call(this,e)).state={imageUrl:window.localStorage.getItem("avatar"),errorMessage:"",firstName:window.localStorage.getItem("first_name"),lastName:window.localStorage.getItem("last_name"),password:"",newPassword:"",confirmPassword:"",notification:""},s.onDrop=s.onDrop.bind(Object(O.a)(s)),s.handleFirstName=s.handleFirstName.bind(Object(O.a)(s)),s.handleLastName=s.handleLastName.bind(Object(O.a)(s)),s.handlePassword=s.handlePassword.bind(Object(O.a)(s)),s.handleConfirm=s.handleConfirm.bind(Object(O.a)(s)),s.submitInfHandler=s.submitInfHandler.bind(Object(O.a)(s)),s.handleNewPassword=s.handleNewPassword.bind(Object(O.a)(s)),s.submitPasswordHandler=s.submitPasswordHandler.bind(Object(O.a)(s)),s}return Object(f.a)(a,[{key:"onDrop",value:function(){var e=Object(l.a)(o.a.mark((function e(t,a){var s,n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t[0]){e.next=2;break}return e.abrupt("return");case 2:return(s=new FormData).append("avatar",t[0],t[0].name),console.log(s),console.log(t[0]),n={"Project-ID":"8381c33d-57cd-41b6-9374-de16a78ede49","User-Name":window.localStorage.getItem("username"),"User-Secret":window.localStorage.getItem("password")},e.prev=7,e.next=10,j.a.patch("https://api.chatengine.io/users/me/",s,{headers:n});case 10:r=e.sent,console.log(r),this.setState({imageUrl:r.data.avatar}),window.localStorage.setItem("avatar",r.data.avatar),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(7),console.log(e.t0.response);case 19:case"end":return e.stop()}}),e,this,[[7,16]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"handleFirstName",value:function(e){e.preventDefault(),this.setState({firstName:e.target.value})}},{key:"handleLastName",value:function(e){e.preventDefault(),this.setState({lastName:e.target.value})}},{key:"handlePassword",value:function(e){e.preventDefault(),this.setState({password:e.target.value})}},{key:"handleNewPassword",value:function(e){e.preventDefault(),this.setState({newPassword:e.target.value})}},{key:"handleConfirm",value:function(e){e.preventDefault(),this.setState({confirmPassword:e.target.value})}},{key:"submitInfHandler",value:function(){var e=Object(l.a)(o.a.mark((function e(t){var a,s,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),a={"Project-ID":"8381c33d-57cd-41b6-9374-de16a78ede49","User-Name":window.localStorage.getItem("username"),"User-Secret":window.localStorage.getItem("password")},s={first_name:this.state.firstName,last_name:this.state.lastName},e.prev=3,e.next=6,j.a.patch("https://api.chatengine.io/users/me/",s,{headers:a});case 6:n=e.sent,console.log(n),this.setState({notification:"Your info has been updated successfully!"}),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(3);case 13:case"end":return e.stop()}}),e,this,[[3,11]])})));return function(t){return e.apply(this,arguments)}}()},{key:"submitPasswordHandler",value:function(e){e.preventDefault()}},{key:"render",value:function(){return Object(h.jsxs)("div",{className:"profile-container",children:[Object(h.jsx)("h3",{className:"notif",children:this.state.notification}),Object(h.jsxs)("div",{className:"setting-container",children:[Object(h.jsx)("h2",{className:"header",children:"Profile Settings"}),Object(h.jsxs)("div",{className:"setting-content",children:[Object(h.jsxs)("div",{className:"profile-picture",children:[Object(h.jsx)("div",{className:"img-container",children:Object(h.jsx)("img",{src:this.state.imageUrl})}),Object(h.jsx)(w.a,{withIcon:!0,singleImage:!0,buttonText:"Choose images",onChange:this.onDrop,imgExtension:[".jpg",".gif",".png",".gif"],maxFileSize:5242880},"image-uploader")]}),Object(h.jsxs)("div",{className:"forms",children:[Object(h.jsxs)("form",{onSubmit:this.submitInfHandler,className:"form-group",children:[Object(h.jsxs)("div",{className:"form-item",children:[Object(h.jsx)("div",{className:"item-name",children:"First Name"}),Object(h.jsx)("input",{type:"text",placeholder:window.localStorage.getItem("first_name"),value:this.state.firstName,onChange:this.handleFirstName})]}),Object(h.jsxs)("div",{className:"form-item",children:[Object(h.jsx)("div",{className:"item-name",children:"Last Name"}),Object(h.jsx)("input",{type:"text",placeholder:window.localStorage.getItem("first_name"),value:this.state.lastName,onChange:this.handleLastName})]}),Object(h.jsx)("div",{className:"btn-container",children:Object(h.jsx)("button",{className:"save-btn",type:"submit",children:"Save change"})})]}),Object(h.jsxs)("form",{onSubmit:this.submitPasswordHandler,className:"password-form",children:[Object(h.jsxs)("div",{className:"form-item",children:[Object(h.jsx)("div",{className:"item-name",children:"Current Password"}),Object(h.jsx)("input",{type:"password",value:this.state.password,onChange:this.handlePassword})]}),Object(h.jsxs)("div",{className:"form-item",children:[Object(h.jsx)("div",{className:"item-name",children:"New Password"}),Object(h.jsx)("input",{type:"password",value:this.state.newPassword,onChange:this.handleNewPassword})]}),Object(h.jsxs)("div",{className:"form-item",children:[Object(h.jsx)("div",{className:"item-name",children:"Confirm Password"}),Object(h.jsx)("input",{type:"password",value:this.state.confirmPassword,onChange:this.handleConfirm})]}),Object(h.jsx)("div",{className:"btn-container",children:Object(h.jsx)("button",{className:"save-btn",type:"submit",children:"Save password"})})]})]})]})]}),Object(h.jsxs)("div",{className:"actions-container",children:[Object(h.jsx)("h2",{className:"header",children:" Actions"}),Object(h.jsxs)("div",{className:"actions-list",children:[Object(h.jsxs)("div",{className:"action",children:[Object(h.jsxs)("button",{onClick:this.props.moveToChatClick,children:[Object(h.jsx)("i",{className:"fab fa-weixin"})," Move to chat section"]}),Object(h.jsx)("div",{className:"notice",children:"(you can hit f5 there to combe back)"})]}),Object(h.jsx)("div",{className:"action",children:Object(h.jsxs)("button",{onClick:this.props.logOutClick,children:[Object(h.jsx)("i",{className:"fas fa-sign-out-alt"}),"Log Out"]})})]})]})]})}}]),a}(n.a.Component);var S=function(){var e=Object(s.useState)(!0),t=Object(d.a)(e,2),a=t[0],n=t[1];if(localStorage.getItem("username")){var r=function(){var e=Object(l.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear(),window.location.reload();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return a?Object(h.jsx)(N,{logOutClick:r,moveToChatClick:function(){n(!1)}}):Object(h.jsx)("div",{className:"App-container",children:Object(h.jsx)(u.d,{height:"100vh",projectID:"8381c33d-57cd-41b6-9374-de16a78ede49",userName:localStorage.getItem("username"),userSecret:localStorage.getItem("password")})})}return Object(h.jsx)(b,{})},y=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,137)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,r=t.getLCP,c=t.getTTFB;a(e),s(e),n(e),r(e),c(e)}))};c.a.render(Object(h.jsx)(n.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),y()}},[[134,1,2]]]);
//# sourceMappingURL=main.33e938e5.chunk.js.map